<?php
/**********************************************************************
    Copyright (C) FrontAccounting, LLC.
	Released under the terms of the GNU General Public License, GPL, 
	as published by the Free Software Foundation, either version 3 
	of the License, or (at your option) any later version.
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
    See the License here <http://www.gnu.org/licenses/gpl-3.0.html>.
***********************************************************************/
$page_security = 'SA_BANKTRANSFER';
$path_to_root = "..";

include_once($path_to_root . "/includes/session.inc");
include_once($path_to_root . "/includes/date_functions.inc");
include_once($path_to_root . "/includes/data_checks.inc");
include_once($path_to_root . "/gl/includes/gl_db.inc");
include_once($path_to_root . "/gl/includes/gl_ui.inc");
include_once($path_to_root . "/includes/references.inc");
$js = "";
if ($use_popup_windows)
	$js .= get_js_open_window(800, 500);
if ($use_date_picker)
	$js .= get_js_date_picker();
page(_($help_context = "Fix Bank Accounts"), false, false, "", $js);

ini_set('mssql.connect_timeout',0);
ini_set('mssql.timeout',0);
set_time_limit(0);

//check_db_has_bank_accounts(_("There are no bank accounts defined in the system."));
//----------------------------------------------------------------------------------------	
				
// if (isset($_GET['AddedID'])) {
	// $trans_no = $_GET['AddedID'];
	// $cvid = $_GET['CV_id'];
	// $trans_type = ST_CREDITDEBITDEPOSIT;
   	// display_notification_centered( _("Other Income has been fixed"));
	// display_note(get_gl_view_str($trans_type, $trans_no, _("&View the GL Journal Entries")));
	// br();
	// display_note(get_cv_view_str($cvid, _("View Transaction")));
   	// hyperlink_no_params($_SERVER['PHP_SELF'], _("Enter &Another"));
	// display_footer_exit();
// }

//----------------------------------------------------------------------------------------
if (isset($_POST['Fix'])){
	global $Refs;
	
	set_time_limit(0);
	
	begin_transaction();	
	
$sql="SELECT '$myBranchCode' as br_code, c.type, c.trans_no, c.supplier_id, 
	c.tran_date, b.trans_date, cd.chk_date, c.cv_id,c.non_trade,
	a.cv_date,a.cv_no,b.id as b_id, cd.chk_number, ROUND(cd.chk_amount,2) as  chk_amount,
	cd.deposit_date,'0' as reconciled
	FROM 0_supp_trans as c
	LEFT JOIN 0_cv_header as a 
	ON c.cv_id=a.id 
	LEFT JOIN 0_bank_trans as b 
	ON a.bank_trans_id=b.id 
	LEFT JOIN 0_cheque_details as cd 
	ON b.id=cd.bank_trans_id
	WHERE a.amount!=0 
	AND c.ov_amount!=0  
	AND c.type='22' 
	AND b.type='22'
	AND b.amount!=0 
	AND !ISNULL(cd.chk_number) 
	AND cd.chk_number IN (
	6245042,
6246849,
6246749,
6246967,
6246992,
6247033,
6247039,
6247041,
6247044,
6247046,
6247099,
6247112,
6247139,
6247163,
6247171,
6247180,
6247181,
6247182,
6247189,
6247196,
6469858,
6469860,
6469862,
6469863,
6469864,
6469868,
6469869,
6469870,
6469871,
6469875,
6469877,
6469884,
6469885,
6469895,
6469900,
6469906,
6469914,
6469921,
6469922,
6469923,
6469924,
6469925,
6469927,
6469928,
6469929,
6469930,
6469932,
6469933,
6469934,
6469940,
6469943,
6469944,
6469945,
6469957,
6469963,
6469964,
6469966,
6469970,
6469974,
6469975,
6469976,
6469977,
6469980,
6469984,
6469990,
6469991,
6469994,
6469995,
6470004,
6470009,
6470012,
6470013,
6470015,
6470016,
6470018,
6470019,
6470020,
6470023,
6470025,
6470026,
6470028,
6470030,
6470034,
6470035,
6470036,
6470037,
6470039,
6470040,
6470041,
6470042,
6470043,
6470045,
6470046,
6470047,
6470049,
6470050,
6470051,
6470052,
6470053,
6470054,
6470055,
6240241,
6240242,
6240423,
6240436,
6250339,
6250340,
6250369,
6250399,
6250415,
6250465,
6250499,
6250596,
6250604,
6250627,
6250638,
6250676,
6250692,
6250698,
6250701,
6250712,
6250724,
6250727,
6250736,
6250737,
6250755,
6250758,
6250764,
6250778,
6250795,
6250796,
6250797,
6250804,
6250807,
6465363,
6465367,
6465376,
6465378,
6465380,
6465388,
6465389,
6465406,
6465407,
6465411,
6465412,
6465424,
6465429,
6465443,
6465452,
6465461,
6465465,
6465467,
6465470,
6465480,
6465502,
6465503,
6465527,
6465528,
6465541,
6465545,
6465546,
6465548,
6465549,
6465550,
6465551,
6465572,
6465575,
6465576,
6465579,
6465583,
6465585,
6465586,
6465587,
6465593,
6465595,
6465605,
6465606,
6465618,
6465625,
6465626,
6465627,
6465630,
6465633,
6465634,
6465635,
6465636,
6465638,
6465639,
6465642,
6465652,
6465653,
6465659,
6465660,
6465661,
6465663,
6465664,
6465665,
6465668,
6465670,
6465684,
6465685,
6465686,
6465687,
6465688,
6465689,
6465691,
6465692,
6465693,
6465694,
6465695,
6465696,
6465697,
6465700,
6465701,
6465702,
6465703,
6465705,
6465706,
6465709,
6465710,
6465719,
6465720,
6465724,
6465725,
6465726,
6465731,
6465732,
6465734,
6465736,
6465737,
6465738,
6465742,
6465743,
6465745,
6465746,
6465747,
6465748,
6465749,
6465750,
6465751,
6465752,
6465753,
6465755,
6465756,
6465760,
6465761,
6465762,
6465763,
6465764,
6465765,
6465766,
6465767,
6465768,
6465769,
6465770,
6465773,
6465775,
6465776,
6465777,
6465778,
6465779,
6465780,
6465781,
6465782,
6465783,
6465784,
6465785,
6465786,
6465787,
6465794,
6465795,
6465797,
6465798,
6465799,
6465800,
6465802,
6465803,
6465804,
6465805,
6465806,
6465807,
6465808,
6465809,
6465812,
6465813,
6465818,
6465819,
6465820,
6465821,
6465822,
6465825,
6465826,
6465827,
6465830,
6465831,
6465832,
6465833,
6465834,
6465835,
6465838,
6465839,
6465840,
6465841,
6465842,
6465843,
6465844,
6465845,
6465846,
6465847,
6465848,
6465849,
6465850,
6474551,
6474552,
6474553,
6474554,
6474555,
6474557,
6474558,
6474560,
6474561,
6474562,
6474564,
6474565,
6474566,
6474567,
6474568,
6474569,
6474570,
6474571,
6474572,
6474573,
6474574,
6474575,
6474576,
6474577,
6474578,
6474579,
6474580,
6474581,
6474582,
6474583,
6474584,
6474585,
6474586,
6474587,
6474588,
6474589,
6474590,
6474591,
6474592,
6242602,
6242604,
6242874,
6242928,
6242929,
6242937,
6242864,
6243009,
6243010,
6252841,
6252923,
6252939,
6252957,
6253016,
6253018,
6253042,
6253043,
6253052,
6253062,
6253067,
6253069,
6253078,
6253090,
6253094,
6253095,
6253111,
6253121,
6253125,
6253126,
6253127,
6253133,
6253139,
6253162,
6253163,
6253168,
6253173,
6253178,
6253192,
6253193,
6253194,
6253208,
6253209,
6253219,
6468670,
6468671,
6468675,
6468701,
6468713,
6468737,
6468739,
6468743,
6468752,
6468753,
6468754,
6468775,
6468777,
6468782,
6468791,
6468792,
6468793,
6468797,
6468800,
6468810,
6468814,
6468815,
6468820,
6468822,
6468827,
6468828,
6468831,
6468841,
6468844,
6468847,
6468848,
6468849,
6468850,
6468851,
6468852,
6468854,
6468855,
6468856,
6468869,
6468870,
6468872,
6468873,
6468875,
6468879,
6468880,
6468881,
6468902,
6468903,
6468904,
6468905,
6468906,
6468907,
6468910,
6468911,
6468912,
6468913,
6468914,
6468917,
6468918,
6468919,
6468920,
6468922,
6468923,
6468928,
6468929,
6468931,
6468932,
6468942,
6468943,
6468944,
6468948,
6468949,
6468950,
6468951,
6468952,
6468954,
6468955,
6468956,
6468957,
6468958,
6468959,
6468960,
6468961,
6468962,
6468963,
6468964,
6468966,
6468967,
6468972,
6468975,
6468976,
6468977,
6468978,
6468979,
6468980,
6468981,
6468982,
6468983,
6468985,
6468986,
6468987,
6468988,
6468989,
6468990,
6468991,
6468992,
6468993,
6468994,
6469000,
6469003,
6469004,
6469005,
6469007,
6469008,
6469009,
6469010,
6469011,
6469012,
6469013,
6469014,
6469015,
6469016,
6469017,
6469018,
6469019,
6469020,
6469021,
6469022,
6469023,
6469024,
6469027,
6469028,
6469029,
6469030,
6469031,
6469032,
6469036,
6469037,
6469038,
6469039,
6469040,
6469041,
6469042,
6469043,
6469044,
6469045,
6469046,
6469047,
6469048,
6469051,
6469052,
6469053,
6469054,
6469055,
6469056,
6469057,
6469058,
6469059,
6469060,
6469062,
6469063,
6469064,
6469065,
6469066,
6469068,
6469069,
6469070,
6469071,
6469072,
6469073,
6469074,
6469075,
6469076,
6469077,
6469078,
6469079,
6469080,
6469081,
6469082,
6249294,
6249295,
6249421,
6249424,
6249546,
6249559,
6249560,
6249561,
6249593,
6249594,
6249597,
6249649,
6249664,
6249682,
6249715,
6249716,
6249718,
6249719,
6249723,
6249731,
6249742,
6249744,
6249747,
6249754,
6249755,
6249758,
6249766,
6249767,
6249768,
6249769,
6249770,
6249771,
6249772,
6249773,
6249774,
6249775,
6249776,
6249777,
6249778,
6249781,
6249783,
6249784,
6249788,
6249789,
6249790,
6249791,
6249793,
6249794,
6249795,
6249797,
6249802,
6249803,
6249804,
6249805,
6249808,
6249809,
6249810,
6249811,
6249813,
6249814,
6249819,
6249823,
6249824,
6249825,
6471856,
6471857,
6471858,
6471860,
6471861,
6471862,
6471863,
6471864,
6471865,
6471866,
6471867,
6471868,
6471869,
6471870,
6471871,
6471876,
6471881,
6471883,
6471884,
6471885,
6471894,
6471895,
6471896,
6471898,
6471901,
6471902,
6471903,
6471904,
6471905,
6471906,
6471907,
6471908,
6471910,
6471911,
6471912,
6471913,
6471914,
6471915,
6471916,
6471917,
6471918,
6471919,
6471920,
6471921,
6471922,
6471923,
6471925,
6471926,
6471927,
6471928,
6471934,
6471935,
6471936,
6471939,
6471940,
6471941,
6471942,
6471943,
6471944,
6471945,
6471946,
6471949,
6471950,
6471951,
6471952,
6471953,
6471954,
6471958,
6471959,
6471960,
6471961,
6471962,
6471963,
6471964,
6471965,
6471966,
6471967,
6471968,
6471970,
6471971,
6471972,
6471973,
6241617,
6241618,
6241690,
6241737,
6241891,
6241895,
6241904,
6241939,
6241944,
6241945,
6242016,
6245257,
6245278,
6245285,
6245295,
6245300,
6245350,
6245355,
6245375,
6245388,
6245391,
6245392,
6245393,
6245405,
6245413,
6245414,
6245415,
6245422,
6245433,
6245434,
6245435,
6245449,
6245466,
6245488,
6245491,
6245496,
6245503,
6245504,
6245537,
6245539,
6245554,
6245560,
6245566,
6245571,
6245575,
6245577,
6245584,
6245599,
6245612,
6245613,
6245614,
6245625,
6245641,
6245643,
6245646,
6245652,
6245656,
6245668,
6245673,
6245675,
6245676,
6245677,
6245678,
6245680,
6245681,
6245682,
6245687,
6245694,
6245697,
6245706,
6245707,
6245708,
6245709,
6245710,
6245711,
6245714,
6470851,
6470852,
6470863,
6470865,
6470868,
6470853,
6470854,
6470855,
6470856,
6470857,
6470858,
6470859,
6470860,
6470861,
6470862,
6470873,
6470875,
6470878,
6470879,
6470880,
6470881,
6470882,
6470884,
6470885,
6470886,
6470887,
6470911,
6470913,
6470914,
6470916,
6470917,
6470918,
6470920,
6470921,
6470924,
6470926,
6470929,
6470930,
6470932,
6470933,
6470934,
6470936,
6470941,
6470942,
6470944,
6470945,
6470946,
6470947,
6470948,
6470949,
6470952,
6470953,
6470954,
6470955,
6470956,
6470957,
6470959,
6470962,
6470964,
6470965,
6470966,
6470967,
6470968,
6470969,
6470970,
6470971,
6470977,
6470978,
6470981,
6470984,
6470985,
6470988,
6470989,
6470990,
6470991,
6470992,
6470993,
6470994,
6470995,
6470996,
6470999,
6471000,
6471001,
6471002,
6471003,
6471004,
6471005,
6471006,
6471007,
6471008,
6471009,
6471012,
6471013,
6471014,
6471015,
6471017,
6471018,
6471019,
6471020,
6471021,
6471022,
6471023,
6471024,
6471025,
6471026,
6471027,
6471028,
6471029,
6471030,
6471031,
6471032,
6471033,
6471034,
6471035,
6471036,
6471037,
6471038,
6471039,
6471040,
6471041,
6471042,
6471043,
6471044,
6471045,
6471046,
6471047,
6471048,
6471049,
6471050,
6471051,
6471052,
6236115,
6236116,
6236132,
6236133,
6236167,
6248451,
6248469,
6248471,
6248477,
6248482,
6248483,
6248484,
6248510,
6248512,
6248537,
6248561,
6248567,
6248573,
6248590,
6248593,
6248596,
6248601,
6248602,
6248613,
6248614,
6248621,
6248622,
6248623,
6248625,
6248631,
6248638,
6248639,
6248640,
6248643,
6248650,
6248651,
6248652,
6248655,
6248656,
6248657,
6248658,
6248659,
6248660,
6248661,
6248662,
6248667,
6248663,
6248664,
6248665,
6248666,
6248669,
6248670,
6248671,
6248672,
6248673,
6248675,
6248678,
6248681,
6248682,
6248685,
6248686,
6248687,
6248689,
6248691,
6248692,
6248693,
6248694,
6248695,
6248696,
6248698,
6248699,
6248703,
6248704,
6248706,
6248707,
6248710,
6248712,
6248713,
6248714,
6248715,
6248716,
6248717,
6248718,
6238822,
6238989,
6244536,
6244671,
6244672,
6244681,
6244685,
6244776,
6244869,
6244899,
6244937,
6244974,
6245002,
6247692,
6247710,
6247726,
6247727,
6247737,
6247738,
6247740,
6247741,
6247744,
6247745,
6247746,
6247778,
6247779,
6247789,
6247791,
6247797,
6247798,
6247799,
6247804,
6247830,
6247831,
6247846,
6247850,
6247853,
6247857,
6247882,
6247890,
6467663,
6467664,
6467684,
6467699,
6467726,
6467736,
6467745,
6467766,
6467768,
6467770,
6467772,
6467776,
6467783,
6467789,
6467811,
6467831,
6467837,
6467845,
6467847,
6467848,
6467849,
6467850,
6467851,
6467857,
6467858,
6467864,
6467865,
6467867,
6467868,
6467873,
6467879,
6467880,
6467893,
6467894,
6467896,
6467897,
6467898,
6467900,
6467901,
6467902,
6467905,
6467906,
6467908,
6467911,
6467912,
6467914,
6467918,
6467920,
6467925,
6467926,
6467927,
6467928,
6467929,
6467932,
6467934,
6467935,
6467936,
6467937,
6467938,
6467939,
6467940,
6467941,
6467942,
6467943,
6467944,
6467945,
6467946,
6467948,
6467973,
6467974,
6467975,
6467976,
6467980,
6467981,
6467982,
6467990,
6467991,
6467992,
6468000,
6468001,
6468003,
6468004,
6468006,
6468013,
6468014,
6468015,
6468016,
6468020,
6468027,
6468028,
6468037,
6468038,
6468039,
6468040,
6468043,
6468045,
6468049,
6468055,
6468056,
6468057,
6468058,
6468059,
6468063,
6468064,
6468066,
6468069,
6468070,
6468071,
6468072,
6468073,
6468074,
6468075,
6468076,
6468077,
6468078,
6468084,
6468086,
6468087,
6468088,
6468089,
6468090,
6468092,
6468094,
6468097,
6468098,
6468099,
6468100,
6468101,
6468102,
6468106,
6468107,
6468126,
6468129,
6468130,
6468131,
6468132,
6468133,
6468134,
6468137,
6468138,
6468139,
6468140,
6468141,
6468142,
6468145,
6468146,
6468147,
6468148,
6468149,
6473353,
6473354,
6473355,
6473356,
6473360,
6473362,
6473363,
6473364,
6473365,
6473366,
6473367,
6473368,
6473370,
6473371,
6473372,
6473373,
6473374,
6473375,
6473378,
6473379,
6473380,
6473381,
6473382,
6473383,
6473384,
6473385,
6473387,
6473388,
6473389,
6473390,
6473391,
6473392,
6473393,
6473394,
6473396,
6473397,
6473398,
6473399,
6473400,
6473401,
6473402,
6473403,
6473404,
6473405,
6473406,
6473407,
6473408,
6473410,
6473411,
6473412,
6473413,
6473414,
6473415,
6473416,
6473417,
6473418,
6233510,
6233562,
6233563,
6233644,
6233650,
6233704,
6233714,
6233723,
6233724,
6464356,
6464366,
6464387,
6464388,
6464439,
6464470,
6464477,
6464478,
6464483,
6464488,
6464489,
6464490,
6464491,
6464496,
6464500,
6464503,
6464506,
6464508,
6464510,
6464511,
6464519,
6464524,
6464528,
6464531,
6464532,
6464538,
6464540,
6464541,
6464542,
6464543,
6464544,
6464545,
6464546,
6464547,
6464548,
6464549,
6464550,
6464551,
6464552,
6464553,
6464554,
6464555,
6464556,
6464557,
6464562,
6464566,
6464567,
6464570,
6464572,
6464573,
6464574,
6464575,
6464576,
6464577,
6464578,
6464579,
6464584,
6464585,
6464591,
6464594,
6464596,
6464598,
6464600,
6464601,
6464602,
6464603,
6464604,
6464605,
6464606,
6464608,
6464609,
6464610,
6464611,
6464613,
6464614,
6464615,
6464616,
6464619,
6464620,
6464621,
6464623,
6464624,
6464625,
6464626,
6464627,
6464628,
6464629,
6464630,
6464631,
6464632,
6464633,
6464634,
6464635,
6464636,
6464637,
6464638,
6464639,
6464640,
6464641,
6464642,
6464643,
6464644,
6464645,
6464646,
6464647,
6464648,
6464649,
6464650,
6464651,
6464652,
6464653,
6237163,
6237205,
6249827,
6249879,
6249880,
6249920,
6249964,
6250004,
6250115,
6250141,
6250169,
6250170,
6250174,
6250178,
6250179,
6250194,
6250201,
6250210,
6250211,
6250212,
6250218,
6250261,
6250264,
6250308,
6250315,
6250318,
6250323,
6468174,
6468177,
6468181,
6468219,
6468222,
6468231,
6468238,
6468244,
6468247,
6468253,
6468254,
6468255,
6468256,
6468257,
6468258,
6468260,
6468261,
6468262,
6468264,
6468266,
6468268,
6468279,
6468284,
6468287,
6468289,
6468291,
6468292,
6468293,
6468294,
6468297,
6468298,
6468301,
6468302,
6468303,
6468304,
6468305,
6468306,
6468307,
6468308,
6468309,
6468310,
6468311,
6468312,
6468313,
6468314,
6468315,
6468316,
6468317,
6468318,
6468319,
6468320,
6468321,
6468322,
6468323,
6468324,
6468325,
6468326,
6468333,
6468335,
6468337,
6468339,
6468341,
6468342,
6468343,
6468345,
6468356,
6468357,
6468363,
6468365,
6468366,
6468367,
6468368,
6468373,
6468377,
6468378,
6468379,
6468380,
6468383,
6468386,
6468390,
6468393,
6468396,
6468397,
6468398,
6468399,
6468400,
6468401,
6468402,
6468403,
6468407,
6468410,
6468411,
6468412,
6468413,
6468414,
6468415,
6468416,
6468421,
6468423,
6468426,
6468427,
6468429,
6468435,
6468436,
6468437,
6468440,
6468443,
6468444,
6468445,
6468446,
6468447,
6468448,
6468449,
6468450,
6468451,
6468452,
6468453,
6468454,
6468456,
6468457,
6468458,
6468459,
6468460,
6468461,
6468462,
6468463,
6468464,
6468468,
6468469,
6468470,
6468471,
6468473,
6468474,
6468475,
6468476,
6468477,
6468478,
6468479,
5726688,
6241122,
6241123,
6241177,
6243587,
6243690,
6243746,
6243776,
6243777,
6243830,
6243869,
6243883,
6243890,
6243906,
6243960,
6243995,
6248748,
6248755,
6248767,
6248769,
6248790,
6248813,
6248837,
6248844,
6248846,
6248853,
6248854,
6248864,
6248865,
6248867,
6248868,
6248886,
6248887,
6248889,
6248890,
6248892,
6248910,
6248919,
6248922,
6466551,
6466556,
6466559,
6466593,
6466604,
6466605,
6466606,
6466621,
6466634,
6466635,
6466653,
6466655,
6466658,
6466659,
6466667,
6466671,
6466677,
6466678,
6466679,
6466683,
6466684,
6466685,
6466688,
6466689,
6466702,
6466709,
6466710,
6466734,
6466735,
6466739,
6466741,
6466743,
6466744,
6466745,
6466748,
6466752,
6466753,
6466761,
6466764,
6466776,
6466780,
6466781,
6466784,
6466789,
6466790,
6466791,
6466792,
6466793,
6466796,
6466797,
6466800,
6466801,
6466806,
6466807,
6466808,
6466809,
6466810,
6466811,
6466812,
6466813,
6466815,
6466817,
6466818,
6466819,
6466820,
6466821,
6466822,
6466823,
6466824,
6466825,
6466826,
6466827,
6466828,
6466829,
6466835,
6466836,
6466837,
6466838,
6466840,
6466841,
6466842,
6466844,
6466848,
6466862,
6466863,
6466864,
6466865,
6466869,
6466870,
6466875,
6466879,
6466885,
6466886,
6466895,
6466897,
6466898,
6466899,
6466900,
6466902,
6466903,
6466906,
6466909,
6466910,
6466911,
6466912,
6466915,
6466916,
6466917,
6466918,
6466919,
6466920,
6466921,
6466923,
6466926,
6466928,
6466929,
6466934,
6466935,
6466937,
6466938,
6466939,
6466940,
6466941,
6466942,
6466943,
6466944,
6466945,
6466946,
6466947,
6466948,
6466949,
6466950,
6466951,
6466952,
6466953,
6466956,
6466957,
6466958,
6466959,
6466960,
6466966,
6466968,
6466969,
6466970,
6466971,
6466974,
6466975,
6466976,
6466977,
6466978,
6466979,
6466982,
6466983,
6466984,
6466985,
6466986,
6466987,
6466990,
6466991,
6466992,
6466993,
6466994,
6466995,
6466996,
6466997,
6466998,
6466999,
6467000,
6467001,
6467002,
6467003,
6467004,
6467005,
6467006,
6467007,
6467008,
6467009,
6467010,
6467012,
6467013,
6467014,
6467015,
6467016,
6467017,
6467018,
6467019,
6467020,
6467021,
6467022,
6467023,
6467024,
6467025,
6467026,
6467027,
6467028,
6467029,
6467030,
6467031,
6467032,
6467033,
6467034,
6467035,
6467036,
6467037,
6467038,
6467039,
6467040,
6467041,
6467042,
6467043,
6467044,
6467045,
6467046,
6467047,
6467048,
6467049,
6467050,
6475051,
6475052,
6475053,
6475054,
6242262,
6242307,
6242486,
6242501,
6242502,
6251842,
6251859,
6251942,
6251944,
6252004,
6252037,
6252045,
6252068,
6252128,
6252170,
6252171,
6252172,
6252175,
6252181,
6252182,
6252189,
6252194,
6252195,
6252197,
6252203,
6252234,
6252236,
6252240,
6252254,
6252263,
6252267,
6252299,
6252303,
6467172,
6467180,
6467182,
6467191,
6467193,
6467211,
6467218,
6467222,
6467231,
6467232,
6467233,
6467234,
6467235,
6467236,
6467237,
6467238,
6467239,
6467240,
6467241,
6467242,
6467247,
6467252,
6467274,
6467289,
6467304,
6467323,
6467326,
6467334,
6467336,
6467337,
6467344,
6467345,
6467346,
6467348,
6467351,
6467352,
6467357,
6467358,
6467370,
6467373,
6467374,
6467375,
6467376,
6467379,
6467382,
6467383,
6467384,
6467388,
6467396,
6467397,
6467398,
6467399,
6467400,
6467401,
6467403,
6467404,
6467405,
6467407,
6467408,
6467411,
6467412,
6467416,
6467417,
6467418,
6467419,
6467420,
6467421,
6467422,
6467424,
6467425,
6467426,
6467427,
6467428,
6467429,
6467430,
6467431,
6467432,
6467433,
6467434,
6467435,
6467436,
6467437,
6467438,
6467439,
6467440,
6467441,
6467442,
6467443,
6467444,
6467445,
6467446,
6467447,
6467448,
6467449,
6467450,
6467451,
6467452,
6467453,
6467454,
6467455,
6467456,
6467457,
6467458,
6467459,
6467460,
6467461,
6467462,
6467463,
6467464,
6467465,
6467466,
6467467,
6467468,
6467469,
6467470,
6467471,
6467472,
6467473,
6467474,
6467475,
6467476,
6467477,
6467478,
6467479,
6467480,
6467481,
6467482,
6467483,
6467484,
6467485,
6467486,
6467487,
6467488,
6467489,
6467490,
6467491,
6467492,
6467493,
6467494,
6467495,
6467496,
6467497,
6467498,
6467499,
6467500,
6467501,
6467502,
6467503,
6467504,
6467505,
6467506,
6467507,
6467508,
6467509,
6467513,
6467514,
6467515,
6467516,
6467517,
6467518,
6467519,
6467520,
6467526,
6467527,
6467528,
6467529,
6467530,
6467531,
6467534,
6467535,
6467536,
6467537,
6467542,
6467551,
6467553,
6467557,
6467558,
6467562,
6467563,
6467565,
6467571,
6467572,
6467578,
6467580,
6467582,
6467583,
6467586,
6467587,
6467588,
6467590,
6467591,
6467593,
6467594,
6467595,
6467596,
6467604,
6467605,
6467606,
6467607,
6467608,
6467610,
6467612,
6467613,
6467614,
6467615,
6467616,
6467617,
6467618,
6467619,
6467622,
6467624,
6467625,
6467626,
6467627,
6467628,
6467632,
6467633,
6467634,
6467635,
6467636,
6467638,
6467642,
6467643,
6467644,
6467645,
6467650,
6473854,
6473857,
6473858,
6473859,
6473860,
6473861,
6473862,
6473863,
6473864,
6473865,
6473866,
6473867,
6473868,
6473869,
6473870,
6473871,
6473872,
6473873,
6473874,
6473875,
6473876,
6473877,
6473878,
6473880,
6473882,
6473883,
6473884,
6473885,
6473886,
6473887,
6473888,
6473889,
6473890,
6473891,
6473892,
6473893,
6473894,
6473897,
6473901,
6473902,
6473903,
6473904,
6473905,
6473906,
6473909,
6473910,
6473912,
6473913,
6473915,
6473916,
6473917,
6473918,
6473919,
6473920,
6473921,
6473922,
6473923,
6473924,
6473925,
6473926,
6473927,
6473928,
6473929,
6473930,
6473931,
6473932,
6473933,
6473934,
6473935,
6473936,
6473937,
6473938,
6473939,
6473940,
6473941,
6467056,
6467073,
6238335,
6238348,
6238388,
6238424,
6238493,
6238494,
6238499,
6252326,
6252382,
6252436,
6252450,
6252536,
6252537,
6252544,
6252550,
6252551,
6252552,
6252566,
6252567,
6252568,
6252574,
6252591,
6252616,
6252623,
6252626,
6252655,
6252656,
6252666,
6252670,
6252671,
6252688,
6252701,
6252705,
6252723,
6252726,
6252727,
6252729,
6252745,
6252752,
6252753,
6252759,
6252767,
6252768,
6252771,
6252773,
6252775,
6252781,
6252782,
6252783,
6252784,
6252785,
6252786,
6252787,
6252792,
6252793,
6252795,
6252796,
6252798,
6252800,
6252801,
6252802,
6252803,
6252806,
6252809,
6252813,
6252814,
6252815,
6252818,
6252819,
6252820,
6252821,
6252822,
6252823,
6252824,
6252825,
6470351,
6470352,
6470353,
6470354,
6470358,
6470359,
6470360,
6470361,
6470362,
6470364,
6470365,
6470366,
6470367,
6470375,
6470390,
6470391,
6470392,
6470393,
6470394,
6470395,
6470397,
6470398,
6470400,
6470403,
6470405,
6470406,
6470407,
6470408,
6470409,
6470412,
6470413,
6470414,
6470415,
6470416,
6470417,
6470418,
6470419,
6470420,
6470421,
6470422,
6470423,
6470424,
6470426,
6470427,
6470429,
6470432,
6470433,
6470434,
6470435,
6470436,
6470437,
6470438,
6470439,
6470441,
6470442,
6470443,
6470444,
6470445,
6470447,
6470448,
6470449,
6470450,
6470451,
6470452,
6470453,
6470454,
6470458,
6470459,
6470460,
6470461,
6470462,
6470463,
6470464,
6470465,
6470468,
6470469,
6470470,
6470473,
6470474,
6470475,
6470476,
6470477,
6470478,
6470479,
6470480,
6470481,
6470482,
6470483,
6470484,
6470485,
6470486,
6470487,
6470488,
6470490,
6470491,
6470492,
6470493,
6470494,
6470495,
6470496,
6470497,
6470498,
6470499,
6470500,
6470501,
6470502,
6470503,
6470504,
6470505,
6470506,
6470507,
6240542,
6240605,
6240793,
6240794,
6240810,
6240875,
6244316,
6244419,
6244423,
6244424,
6244455,
6244485,
6244489,
6251349,
6251398,
6251454,
6251455,
6251500,
6251586,
6251795,
6247940,
6248004,
6248006,
6248053,
6248085,
6248090,
6248098,
6248099,
6248100,
6248112,
6248113,
6248114,
6248119,
6248120,
6248128,
6248146,
6248156,
6248165,
6248168,
6248188,
6248189,
6248197,
6248209,
6248212,
6248229,
6248230,
6248232,
6248242,
6248250,
6248288,
6248289,
6248318,
6248323,
6248360,
6248373,
6248381,
6248419,
6465995,
6465996,
6466023,
6466024,
6466034,
6466045,
6466051,
6466053,
6466080,
6466111,
6466114,
6466119,
6466133,
6466144,
6466152,
6466155,
6466156,
6466157,
6466158,
6466163,
6466166,
6466174,
6466192,
6466193,
6466196,
6466203,
6466222,
6466223,
6466245,
6466252,
6466253,
6466260,
6466261,
6466262,
6466266,
6466277,
6466280,
6466284,
6466286,
6466288,
6466310,
6466315,
6466316,
6466319,
6466322,
6466323,
6466324,
6466343,
6466344,
6466345,
6466353,
6466356,
6466369,
6466374,
6466375,
6466390,
6466391,
6466392,
6466400,
6466403,
6466404,
6466405,
6466408,
6466411,
6466413,
6466414,
6466418,
6466420,
6466422,
6466423,
6466425,
6466426,
6466427,
6466428,
6466429,
6466430,
6466434,
6466435,
6466449,
6466457,
6466459,
6466462,
6466463,
6466466,
6466474,
6466481,
6466503,
6466504,
6466505,
6466506,
6466507,
6466508,
6466514,
6466515,
6466516,
6466536,
6466537,
6466539,
6466540,
6466541,
6466547,
6466548,
6466549,
6471351,
6471352,
6471353,
6471355,
6471356,
6471359,
6471360,
6471361,
6471362,
6471369,
6471370,
6471380,
6471382,
6471384,
6471387,
6471388,
6471393,
6471399,
6471400,
6471401,
6471402,
6471407,
6471408,
6471411,
6471412,
6471413,
6471414,
6471416,
6471418,
6471419,
6471424,
6471425,
6471431,
6471438,
6471440,
6471441,
6471447,
6471448,
6471450,
6471451,
6471452,
6471453,
6471456,
6471458,
6471459,
6471460,
6471465,
6471467,
6471468,
6471470,
6471471,
6471473,
6471475,
6471479,
6471480,
6471481,
6471482,
6471488,
6471494,
6471498,
6471499,
6471500,
6471506,
6471507,
6471515,
6471516,
6471517,
6471518,
6471520,
6471521,
6471522,
6471523,
6471524,
6471534,
6471535,
6471538,
6471542,
6471543,
6471546,
6471547,
6471551,
6471552,
6471554,
6471556,
6471557,
6471558,
6471559,
6471560,
6471561,
6471562,
6471563,
6471564,
6471565,
6471568,
6471569,
6471570,
6471571,
6471572,
6471574,
6471575,
6471576,
6471578,
6471579,
6471582,
6471585,
6471591,
6471592,
6471594,
6471597,
6471598,
6471599,
6471600,
6471601,
6471602,
6471603,
6471604,
6471605,
6471606,
6471607,
6471608,
6471609,
6471610,
6471611,
6471613,
6471614,
6471615,
6471620,
6471621,
6471622,
6471623,
6471624,
6471625,
6471626,
6471628,
6471629,
6471630,
6471631,
6471632,
6471633,
6471634,
6471635,
6471638,
6471639,
6471641,
6471642,
6471643,
6471644,
6471645,
6471646,
6471651,
6471652,
6471654,
6471657,
6471664,
6471665,
6471668,
6471669,
6471670,
6471671,
6471672,
6471673,
6471674,
6471677,
6471678,
6471679,
6471682,
6471683,
6471684,
6471685,
6471686,
6471687,
6471688,
6471689,
6471690,
6471691,
6471692,
6471693,
6471694,
6471695,
6471696,
6471698,
6471699,
6471700,
6471702,
6471703,
6471704,
6471705,
6471706,
6471707,
6471708,
6471710,
6471713,
6471715,
6471716,
6471717,
6471718,
6471719,
6471720,
6471721,
6471722,
6471723,
6471724,
6471727,
6471728,
6471729,
6471730,
6471731,
6471732,
6471733,
6471734,
6471735,
6471736,
6471737,
6471738,
6471739,
6471740,
6471741,
6471742,
6471743,
6471744,
6471745,
6471748,
6471749,
6471750,
6471751,
6471752,
6471753,
6471754,
6471755,
6471756,
6471757,
6471758,
6471759,
6471760,
6471761,
6471762,
6471763,
6471764,
6471765,
6471766,
6471767,
6471768,
6471769,
6471770,
6471771,
6471772,
6471773,
6471774,
6471775,
6471776,
6471777,
6471778,
6471779,
6471780,
6471781,
6471782,
6471783,
6471784,
6471785,
6471786,
6471787,
6471788,
6471789,
6471790,
6471791,
6471792,
6471793,
6471794,
6471795,
6471796,
6471797,
6471798,
6471799,
6471800,
6471801,
6471802,
6132526,
6132618,
6250827,
6250828,
6250956,
6250964,
6250969,
6250970,
6250971,
6250972,
6250974,
6251008,
6251011,
6251015,
6251034,
6251059,
6251070,
6251082,
6251083,
6251086,
6251098,
6251103,
6251104,
6251111,
6251123,
6251126,
6251127,
6251130,
6251133,
6251143,
6251146,
6251147,
6251149,
6251154,
6251156,
6251158,
6251159,
6251160,
6251161,
6251162,
6251163,
6251165,
6251166,
6251167,
6251168,
6251170,
6251174,
6251180,
6251181,
6251182,
6251185,
6251186,
6251188,
6251190,
6251191,
6251192,
6251196,
6251197,
6251198,
6251199,
6251200,
6251207,
6251208,
6251209,
6251210,
6251211,
6251214,
6251215,
6251216,
6251217,
6251218,
6251220,
6251221,
6251226,
6251228,
6251231,
6251232,
6251233,
6251234,
6251235,
6251236,
6251239,
6251240,
6251241,
6251242,
6251243,
6251244,
6251248,
6251249,
6251250,
6251251,
6251252,
6251253,
6251254,
6251255,
6251257,
6251258,
6251259,
6251260,
6251261,
6251262,
6239255,
6239294,
6239313,
6239320,
6239355,
6239356,
6239441,
6239450,
6239516,
6248947,
6248961,
6248970,
6248978,
6249003,
6249043,
6249049,
6249054,
6249071,
6249091,
6249101,
6249102,
6249103,
6249111,
6249115,
6249116,
6249117,
6249120,
6249124,
6249128,
6249131,
6249135,
6249137,
6249140,
6249141,
6249142,
6249143,
6249150,
6249151,
6249152,
6249153,
6249154,
6249155,
6249156,
6249157,
6249158,
6249159,
6249160,
6249161,
6249164,
6249165,
6249167,
6249175,
6249176,
6249177,
6249178,
6249179,
6249182,
6249185,
6249187,
6249188,
6249189,
6249190,
6249195,
6249196,
6249197,
6249204,
6249205,
6249206,
6249209,
6249210,
6249213,
6249222,
6249223,
6249225,
6472851,
6472852,
6472853,
6472854,
6472855,
6472856,
6472857,
6472858,
6472860,
6472864,
6472865,
6472867,
6472871,
6472872,
6472876,
6472877,
6472878,
6472879,
6472880,
6472882,
6472883,
6472884,
6472885,
6472886,
6472887,
6472888,
6472889,
6472890,
6472891,
6472892,
6472893,
6472894,
6472895,
6472896,
6472897,
6472898,
6472899,
6472900,
6472901,
6472902,
6472903,
6472904,
6472905,
6472906,
6472907,
6472908,
6245158,
6245173,
6245174,
6245215,
6245216,
6245217,
6245218,
6245219,
6245220,
6245221,
6247241,
6247252,
6247270,
6247304,
6247322,
6465873,
6465874,
6465901,
6465944,
6469255,
6469266,
6469267,
6469268,
6469270,
6469289,
6469290,
6469294,
6469295,
6469297,
6469302,
6469304,
6469307,
6469318,
6469325,
6469326,
6469327,
6469328,
6469329,
6469330,
6469331,
6469332,
6469333,
6469334,
6469335,
6469338,
6469339,
6469344,
6469345,
6469346,
6469347,
6469349,
6469350,
6474352,
6236466,
6236539,
6236628,
6236657,
6236658,
6236663,
6247327,
6247328,
6247350,
6247403,
6247411,
6247420,
6247445,
6247446,
6247449,
6247452,
6247464,
6247467,
6247494,
6247512,
6247517,
6247518,
6247521,
6247529,
6247530,
6247532,
6247538,
6247541,
6247547,
6247548,
6247549,
6247556,
6247557,
6247567,
6247568,
6247569,
6247573,
6247575,
6247577,
6247579,
6247581,
6247582,
6247586,
6247588,
6247590,
6247591,
6247595,
6247596,
6247601,
6247603,
6247606,
6247607,
6247608,
6247609,
6247610,
6247613,
6247614,
6247618,
6247619,
6247621,
6247623,
6247624,
6472354,
6472358,
6472359,
6472360,
6472361,
6472362,
6472363,
6472364,
6472365,
6472366,
6472367,
6472368,
6472369,
6472372,
6472374,
6472379,
6472380,
6472381,
6472383,
6472384,
6472385,
6472386,
6472387,
6472388,
6472389,
6472390,
6472391,
6472392,
6472393,
6472394,
6472395,
6472396,
6472397,
6472398,
6472399,
6472400,
6472401,
6472402,
6472403,
6472404,
6472405,
6472406,
6472407,
6472408,
6472409,
6472410,
6472411,
6472412,
6241429,
6241452,
6246230,
6246255,
6246269,
6246274,
6246312,
6246324,
6246331,
6246374,
6246378,
6246379,
6246383,
6246398,
6246399,
6246401,
6246402,
6246408,
6246409,
6246427,
6246437,
6246472,
6246473,
6246478,
6246481,
6246504,
6246505,
6246532,
6246534,
6246538,
6246539,
6246542,
6246543,
6246544,
6246547,
6246551,
6246555,
6246558,
6246559,
6246560,
6246561,
6246562,
6246563,
6246564,
6246565,
6246566,
6246567,
6246568,
6246572,
6246573,
6246576,
6246577,
6246581,
6246583,
6246585,
6246586,
6246587,
6246588,
6246589,
6246590,
6246591,
6246592,
6246594,
6246597,
6246599,
6246600,
6246601,
6246602,
6246603,
6246604,
6246605,
6246606,
6246607,
6246610,
6246617,
6246618,
6246619,
6246620,
6246621,
6246622,
6246624,
6246625,
6246626,
6246627,
6246628,
6246629,
6246630,
6246633,
6246634,
6246635,
6246636,
6246647,
6246649,
6246650,
6246652,
6246653,
6246654,
6246655,
6246660,
6246661,
6246662,
6246663,
6246664,
6246665,
6246666,
6246667,
6246668,
6246670,
6246671,
6246672,
6246673,
6246674,
6246675,
6246676,
6246679,
6246682,
6246683,
6246684,
6246685,
6246689,
6246690,
6246691,
6246692,
6246694,
6246695,
6246696,
6246697,
6246698,
6246699,
6246701,
6246702,
6246703,
5897507,
5897519,
6239778,
6239779,
6239836,
6239889,
6239895,
6239978,
6239982,
6239995,
6239996,
6239997,
6240015,
6240016,
6240023,
6240025,
6464860,
6464867,
6464907,
6464925,
6464930,
6464941,
6464967,
6464973,
6464987,
6464988,
6464989,
6464993,
6464994,
6464995,
6464998,
6464999,
6465000,
6465005,
6465008,
6465012,
6465015,
6465018,
6465020,
6465024,
6465026,
6465027,
6465028,
6465029,
6465030,
6465031,
6465032,
6465033,
6465034,
6465035,
6465036,
6465037,
6465038,
6465039,
6465040,
6465041,
6465042,
6465043,
6465044,
6465045,
6465046,
6465047,
6465048,
6465049,
6465050,
6465051,
6465055,
6465063,
6465065,
6465066,
6465067,
6465070,
6465071,
6465073,
6465077,
6465078,
6465080,
6465081,
6465086,
6465091,
6465092,
6465093,
6465094,
6465095,
6465096,
6465097,
6465098,
6465099,
6465100,
6465101,
6465102,
6465103,
6465104,
6465107,
6465111,
6465112,
6465113,
6465114,
6465115,
6465123,
6465126,
6465127,
6465131,
6465137,
6465138,
6465139,
6465140,
6465141,
6465142,
6465143,
6465144,
6465145,
6465146,
6465147,
6465148,
6465149,
6465150,
6465151,
6465155,
6465156,
6465157,
6465159,
6465160,
6465161,
6465162,
6465163,
6465164,
6465165,
6465166,
6465167,
6465168,
6465169,
6243054,
6243140,
6243340,
6243402,
6243405,
6243406,
6243438,
6245773,
6245776,
6245815,
6245821,
6245830,
6245861,
6245889,
6245920,
6245922,
6245936,
6245939,
6245951,
6245957,
6245960,
6245964,
6245966,
6245968,
6245969,
6245970,
6245976,
6245994,
6246027,
6246028,
6246036,
6246037,
6246078,
6246085,
6246093,
6246096,
6246101,
6246109,
6246132,
6246146,
6246171,
6246172,
6246173,
6246176,
6246177,
6246189,
6246193,
6246199,
6246204,
6246206,
6246207,
6246213,
6246215,
6469356,
6469362,
6469365,
6469379,
6469381,
6469382,
6469385,
6469386,
6469398,
6469399,
6469401,
6469402,
6469405,
6469406,
6469408,
6469409,
6469410,
6469411,
6469412,
6469413,
6469414,
6469415,
6469416,
6469417,
6469418,
6469419,
6469432,
6469436,
6469439,
6469440,
6469441,
6469442,
6469443,
6469444,
6469449,
6469451,
6469452,
6469453,
6469458,
6469459,
6469460,
6469464,
6469465,
6469466,
6469467,
6469470,
6469473,
6469475,
6469481,
6469482,
6469486,
6469487,
6469492,
6469493,
6469496,
6469497,
6469498,
6469499,
6469500,
6469501,
6469502,
6469503,
6469506,
6469507,
6469508,
6469509,
6469510,
6469511,
6469518,
6469519,
6469520,
6469521,
6469522,
6469523,
6469524,
6469525,
6469526,
6469529,
6469532,
6469533,
6469534,
6469535,
6469536,
6469538,
6469539,
6469540,
6469542,
6469549,
6469551,
6469552,
6469554,
6469555,
6469556,
6469557,
6469558,
6469559,
6469560,
6469561,
6469562,
6469563,
6469564,
6469565,
6469566,
6469567,
6469568,
6469569,
6469570,
6469571,
6469572,
6469574,
6469575,
6469576,
6469577,
6469578,
6469579,
6469580,
6469581,
6469582,
6469583,
6469584,
6469587,
6469588,
6469591,
6469592,
6469593,
6469594,
6469595,
6469596,
6469597,
6469599,
6469600,
6469601,
6469602,
6469603,
6469604,
6469605,
6469606,
6469607,
6469608,
6469609,
6469610,
6469611,
6469612,
6469613,
6469614,
6469615,
6469616,
6469617,
6469618,
6469620,
6469621,
6469622,
6469623,
6469624,
6469625,
6469626,
6469627,
6469628,
6469629,
6469630,
6469631,
6469632,
6469633,
6469634,
6469635,
6469636,
6469637,
6469638,
6469639,
6469640,
6469641,
6469642,
6469643,
6469644
	
	)
	order by b.trans_date
";
		
$result= db_query($sql, "failed to get bank_accounts id.");
	
	//2305-pdc payable
	//2501601-pdc payable-aub
	while($row = db_fetch($result))
	{
		
		// $sql1 = "UPDATE ".TB_PREF."gl_trans SET account='10102299'
		// WHERE type_no='".$row['trans_no']."' and type='22' and account='2501601'";
		// db_query($sql1,"Failed to update gl_trans.");
		
		//$date_ = sql2date($row['chk_date']);
		$date_='12/31/2016';
		$ref   = $Refs->get_next(ST_OUTSTANDINGCHECKS);
		$memo_ = "Adjustment for Payment, Outstanding Checks, Check#: ".$row['chk_number'];
		
		$trans_type = ST_OUTSTANDINGCHECKS;

		$trans_id = get_next_trans_no($trans_type);
		
		
			add_gl_trans($trans_type, $trans_id, $date_, 10102299, 0, 0, $memo_, $row['chk_amount'],null,3,$row['supplier_id']);
			add_gl_trans($trans_type, $trans_id, $date_, 2000015, 0, 0, $memo_, -$row['chk_amount'],null,3,$row['supplier_id']);

			

		if($memo_ != '')
		{
			add_comments($trans_type, $trans_id, $date_, $memo_);
		}
		
		$Refs->save($trans_type, $trans_id, $ref);
		
		add_audit_trail($trans_type, $trans_id, $date_);
	}

	
	display_notification("Fixing Bank Accounts are Successful!");
	
	commit_transaction();
	//}
	// else {
	// display_notification("Selected Account Code is included in Bank Accounts");
	// }
}

start_form();
start_row();
submit_center('Fix',_("Fix Voided PDC Payable"), true, '', false);
end_table();
end_form();
end_page();
?>